# üß≠ CodeCompass

This project provides an end-to-end solution for **semantic search across both source code and documentation**.  
It is fully containerized with Docker and integrates multiple storage and retrieval systems to offer fast, relevant, and context-rich search capabilities.

---

## üöÄ Core Components

### Docker Container
- Encapsulates the entire application to ensure consistent, isolated runtime environments.
- Triggers the **Initial Indexing Script** on startup.

### Initial Indexing Script
- Serves as the system‚Äôs entry point.
- Orchestrates both **Code Indexer** and **Document Indexer** to process and index files.

### Storage
- **MongoDB**: Primary metadata store for code and documentation.
- **Graph Database (NetworkX)**: Manages code relationships like function calls, imports, and dependencies.
- **FAISS Vector Database**: Stores embeddings for semantic search across both code and documentation, differentiated by class.

### Indexers
- **Code Indexer**:  
  - Processes source code files.
  - Extracts metadata and relationships.
  - Generates embeddings using **CodeBERT**.
- **Document Indexer**:  
  - Processes documentation files.
  - Extracts content.
  - Generates embeddings using **Microsoft‚Äôs MPNet V2 (base)** transformer model.

### Query Processor
- Receives user queries and determines whether they are code-related, documentation-related, or both.
- Converts queries to embeddings.
- Retrieves and ranks results from FAISS based on semantic similarity.

### Retrievers
- **Code Retriever**: Fetches code snippets and metadata, enriched with relationship data from the Graph Database.
- **Document Retriever**: Fetches relevant documentation excerpts and metadata.
- Activates appropriate retrievers based on the query‚Äôs intent.

### Utilities
- Central utility module provides:
  - Configuration management
  - Database connections
  - Embedding operations
  - Centralized logging

---

## üîÑ Component Interaction Flow

### Initial Indexing
1. Docker container launches the **Initial Indexing Script**.
2. **Code Indexer** and **Document Indexer** process files:
   - Metadata is stored in **MongoDB**.
   - Code relationships are stored in **NetworkX**.
   - Semantic embeddings are stored in **FAISS**, with a class tag to distinguish between code and documentation.

### Query Processing
1. **User Query** ‚Üí **Query Processor**:
   - Analyzes query intent.
   - Embeds the query text.
2. **Embedding Retrieval**:
   - Queries **FAISS** for similar embeddings.
   - Differentiates between code and documentation results.
3. **Retriever Activation**:
   - Activates **Code Retriever**, **Document Retriever**, or both, based on query type.
4. **Metadata Enrichment**:
   - Fetches detailed metadata from **MongoDB**.
   - For code, retrieves relationship data from **NetworkX**.
5. **Result Compilation**:
   - Combines semantic scores, metadata, and relationship context.
   - Ranks results by relevance.
6. **Response Generation**:
   - Formats and returns a structured response to the user.

---

## üõ†Ô∏è Technologies Used

- **Docker** ‚Äî Containerization
- **MongoDB** ‚Äî Metadata storage
- **NetworkX** ‚Äî Graph database for code relationships
- **FAISS** ‚Äî Vector search for semantic retrieval
- **CodeBERT** ‚Äî Code embedding model
- **MPNet V2** ‚Äî Documentation embedding model

---

## ‚ö° Getting Started

### 1. Generate API Key
- Create an API key for **Gemini** (Google‚Äôs LLM).
- Add it to a `.env` file at the project root:

```bash
GEMINI_API_KEY=your_api_key_here
```

### 2. Add Target Repository
- Place the source code and/or documentation you want to explore inside the `data/` folder.

### 3. Run Initial Indexing
- Build the metadata, embeddings, and graphs:

```bash
docker-compose run initial-indexing
```

This will:
- Populate **FAISS** with embeddings.
- Populate **MongoDB** with code/document metadata.
- Build the **NetworkX** graph for code relationships.

### 4. Start Query Processor
- Launch an interactive querying loop:

```bash
docker-compose run query-processor
```

In this loop:
- Enter natural language queries.
- Receive **context-rich responses** generated by the LLM.
- Type `quit` or press `Ctrl+C` to exit.

---

## üì¢ Future Enhancements
- Add multi-language code support.
- Support real-time indexing of new files.
- Advanced query intent classification (e.g., natural language questions vs. direct code search).

---
- Project presentation: https://shorturl.at/VWV6l
- Project introduction video: https://youtu.be/peppjDJnF98
- Project demo: https://www.youtube.com/watch?v=3W8506bikSY


